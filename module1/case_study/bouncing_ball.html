<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ball</title>
    <style>
        h1 {
            color: green;
        }

        canvas {
            background-color: black;
            position: absolute;
            /*width: 1000px;*/
            /*height: 500px;*/
        }
    </style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
    let score = 0;

    function scoreGain() {
        score++;
    }

    function display() {
        draw.clearRect(0, 0, canvas.width, canvas.height);
        draw.font = '30px Arial';
        draw.fillStyle = 'white';
        draw.textAlign = 'right';
        draw.fillText('Score: ' + score, gameBoard.width, 30);
        draw.beginPath();
        ball.hitCheck();
        ball.move();
        draw.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
        draw.fillStyle = `rgb(${Math.random() * 255},${Math.random() * 255},0)`;
        draw.fill();
        draw.fillStyle = 'white';
        draw.fillRect(bar.x, 450, bar.width, 20);
    }

    let gameBoard = {
        width: 1000,
        height: 500,
    }
    let canvas = document.getElementById('canvas');
    canvas.width = gameBoard.width;
    canvas.height = gameBoard.height;

    let ball = {
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        speedX: 10,
        speedY: -5,
        radius: 15,

        move() {
            this.x += this.speedX;
            this.y += this.speedY;
        },

        hitCheck() {
            let checkX = this.x + this.speedX;
            let checkY = this.y + this.speedY;
            if (checkY >= canvas.height) {
                clearInterval(Interval);
                alert('Game over.' + ' Your score: ' + score);
                return;
            }
            if (checkX < 0 || checkX > canvas.width) {
                this.speedX = 0 - this.speedX;
            }
            if (checkY < 0) {
                this.speedY = 0 - this.speedY;
            }

            //check if hit bar
            if (checkY >= 450 && checkY <= 460 && checkX >= bar.x && checkX <= bar.x + bar.width) {
                console.log('hit bar');
                this.speedY = 0 - this.speedY;

            }
        }
    }

    let bar = {
        width: 200,
        x: 100,

        move(evt) {
            switch (evt.key) {
                case 'ArrowLeft':
                    this.x -= 30;
                    break;
                case 'ArrowRight':
                    this.x += 30;
            }
        },
    }

    let draw = canvas.getContext('2d');
    addEventListener('keydown', bar.move.bind(bar));
    const Interval = setInterval(display, 25);
    setInterval(scoreGain, 500);

</script>
</body>
</html>